---
import Layout from '../layouts/Layout.astro';
import Markdown from '../components/Markdown.astro';

// Import all Markdown files
const postModules = import.meta.glob('../content/power-rankings/*.md', { eager: true });

// Convert modules to an array
const posts = Object.values(postModules)
  .map(m => ({
    ...m.frontmatter,
    content: m.default
  }))
  .sort((a, b) => new Date(b.date) - new Date(a.date));
---

<Layout title="Power Rankings">
  <h1 class="mb-10 text-3xl font-bold">Power Rankings</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    {posts.map(post => (
      <article class="border rounded-lg overflow-hidden shadow-md">
        <img src={post.image} alt={post.title} class="w-full h-48 object-cover" />
        <div class="p-4">
          <h2 class="text-xl font-semibold mb-2">{post.title}</h2>
          <p class="text-sm text-gray-500 mb-4">{post.date}</p>
          <Markdown content={post.content} />
        </div>
      </article>
    ))}
  </div>
</Layout>
