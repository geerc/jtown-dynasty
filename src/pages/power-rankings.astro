---
import Layout from '../layouts/Layout.astro';
import Markdown from '../components/Markdown.astro';
import { glob } from 'astro:content';

// Load all Markdown files in the content folder
const posts = await glob('../content/power-rankings/*.md');

// Sort posts by date descending
posts.sort((a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date));
---

<Layout title="Power Rankings">
  <h1 class="mb-10 text-3xl font-bold">Power Rankings</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    {posts.map(post => (
      <article class="border rounded-lg overflow-hidden shadow-md">
        <a href={post.url}>
          <img src={post.frontmatter.image} alt={post.frontmatter.title} class="w-full h-48 object-cover" />
        </a>
        <div class="p-4">
          <h2 class="text-xl font-semibold mb-2">{post.frontmatter.title}</h2>
          <p class="text-sm text-gray-500 mb-4">{post.frontmatter.date}</p>
          <Markdown content={post.compiledContent()} />
          <a href={post.url} class="text-blue-600 hover:underline mt-2 inline-block">Read more</a>
        </div>
      </article>
    ))}
  </div>
</Layout>
